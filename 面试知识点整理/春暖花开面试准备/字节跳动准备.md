# 字节跳动准备https://www.nowcoder.com/study/live/489/1/1

## 一面：1个半小时

java基础知识

- 其他
  - 输入URL以后的过程
  - java8新特性
- 集合
  - linkedList和arrayList区别
  - hashmap的数据结构
    - hashmap什么时候扩容，怎么扩容，为什么负载因子是0.75？
    - concurrenthashmap新插入一个对象会hash几次
  - concurrentHashMap分段锁结构
    - hashmap和concurrent hashmap是有什么区别
  - segment，1.7和1.8的不同：1.8取消了分段锁机制，而是用synchronized+cas具体去锁每个桶实现更细粒度的线程安全
  - [链表](https://www.nowcoder.com/jump/super-jump/word?word=链表)和[红黑树](https://www.nowcoder.com/jump/super-jump/word?word=红黑树)解决hash冲突
  - [红黑树](https://www.nowcoder.com/jump/super-jump/word?word=红黑树)的特点，[红黑树](https://www.nowcoder.com/jump/super-jump/word?word=红黑树)为什么比搜索树快
  - concurrent hashmap是怎么实现线程安全的？他最大的segment是多少？
  - 对elk了解吗，logstash的作用是什么
- 操作系统
  - 内核态和用户态的区别，他们直接怎么切换的，
  - 进程之间的通讯方式有哪些，目前开视频用的是哪种。（猜了一个socket，应为觉得就他涉及到了网络）
  - 线程同步的作用是什么？
  - 死锁是什么？
  - 线程共享哪些东西？
  - 进程调度算法有哪些？
  - 父进程子进程的实现 
  - 除了一对多外，线程和进程的区别
- 计网
  - 你见过哪些状态码
    - 301、302、401、404等状态码的含义，301和302的区别
  - HTTP 包结构。
    - http请求头部有哪些？都有什么含义？
  - Cookie和Session的区别
  - http 1.0和1.1的区别
  - HTTP 请求方法。
    - get和post提交的区别
  - 拥塞控制是什么原理
  - 流量控制
  - 如何实现UDP可靠传输 
  - TCP和UDP的各自应用
  - 为什么TCP是全双工模式、可以保证可靠传输？ 
  - UDP的特征、应用，属于哪一层？
  - DNS协议
    - DNS属于哪一层？
    - DNS请求报文的结构
    - DNS查询用的什么传输层协议
    - 描述一下输入域名到显示的过程（从DNS解析到http建立到内容返回浏览器渲染）
    - 其中涉及到的递归查询和迭代查询
    - DNS用的是TCP还是UDP，为什么用UDP（UDP的好处，握手效率，报文长度）
    - 本地域名服务器向根服务器查询的是什么？
      - 要从输入的域名检验服务器中对应的域名服务器的IP地址
  - TCP的三次握手，详细描述一下，包括状态（SYN，ACK，确认序列号和起始序列号）
  - TCP的四次挥手（标志位和序列号）
  - 两个MSL是指什么，为什么要两个？MSL是指什么
    - 确保服务端收到，以及防止端口重用时网络中仍然有残余报文段导致错乱
    - msl是指包生存时间
- 其他
  - get和put的区别
  - 如何取本地的cookie 
  - TIME_WAIT 是什么？
  - 你提到了 If-Modified-Since，它的作用是什么？这个字段的值如何确定？
  - 知道 Cookie 吗？
  - 你提到了 Unix Domain Socket，那 Unix Domain Socket 和绑定 localhost 的 Socket 有什么区别？哪个性能更高？

linux

- 查看并开放Linux对外端口 

redis

- [redis](https://www.nowcoder.com/jump/super-jump/word?word=redis)的主从复制你说一下 

并发

- synchronized和Lock的区别，这两种锁当线程发生并发时状态有什么不一样？
- synchronize,reentainlock,volatile这三个是重点考察对象
  - 如何实现线程安全的
  - synchronize指令monitor.enter和monitor.exit，volatile解决指令重排和内存可见性的原理
  - sync与reentainlock的区别，二者的重入是什么原理，如何实现；
- 多线程实现方式runable和callable区别
- 线程池
  - 参数有哪些
  - 常用线程池有哪几种
  - [项目](https://www.nowcoder.com/jump/super-jump/word?word=项目)里用的什么线程池。

jvm

- 垃圾回收算法有哪些？
- 栈区内存和堆区内存有什么区别？
- jvm里如何判断对象死亡 
- jvm里如何判断类死亡。面试官解答：三个角度，看类实例是否被回收，类加载器是否被回收，Class对象是否被回收

数据库

- mysql事务4大特性ACID
- InnoDB 和 MyISAM 的区别。
- MySQL 索引的作用和实现。
- 事务隔离级别，每个级别解决，脏读、幻读、不可重复读什么问题
  - 脏读、不可重复读，幻读三个现象解释一下
  - mysql的默认隔离级别是什么
  - 在innodb可重复读的情况下，可以解决幻读的情况吗，
    - 应是不能完全解决，可以一定程度上避免，可以从next-key，lock的原理想
- mysql索引的结构
  - 建立索引有什么要求（不知道，知识说了长度不能过长）
  - .一个表能建多少个索引（不知道）
  - ABC建立联合索引，只用AC能行吗（一开始说能行，后来说不行，不知道）
  - 普通索引和聚簇索引
    - 概念（底层b+树的叶子节点的区别）
    - 区别
    - 非聚簇索引查询的话会做几次查询（一次）
    - 非聚簇索引存放的是什么东西（叶子节点存的是键值和数据所在的物理地址）
  - 为什么用b+树做索引
  - b+树的特点
  - 索引覆盖和回表的实际过程
  - 什么情况向索引失效等等
- 底层是什么实现的，为什么这样实现？
- sql语句，选课表，求a和b的公共选课（用了子查询，问其有没有方法，说不知道）
- 数据库的隔离级别有哪些，xx隔离级别可以解决xx问题吗，这样问了几组，
- 可重复读的底层是怎么实现的？
- 对于 `SELECT id, age FROM user WHERE status = 0 and age > 12;` 这条语句，怎样建立索引比较好？

算法

- 推荐大家准备面试之前先去复习一遍数据结构的常用数据结构数组、[链表]()、[二叉树]()、队列、栈等

- 然后再去吧[leetcode]()的简单经典题刷一遍

- 再去仔细研究研究，回溯，[动态规划]()等等差不多就可以了

- 基本难度都是在简单题里面，我记得最难的就是那个在一个矩阵里找到岛屿有多少个，我遇见的。

- 最长上升子序列，最长公共子序列，把最长公共子序列优化到一维数组

- 二维数组行遍历和列遍历性能比较

- Top K问题，堆[排序](https://www.nowcoder.com/jump/super-jump/word?word=排序)解法，讲详细思路，找最大的第k个数用大顶堆还是小顶堆？手写快排解法，没写完被打断了 

- https://github.com/lewiscrow/WorkHardAndFindJob/blob/master/%E5%A4%8D%E4%B9%A0/%E9%9D%A2%E8%AF%95/%E6%89%8B%E6%92%95%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8%E9%9D%A2%E8%AF%95%E6%97%B6%E5%87%BA%E7%8E%B0%E8%BF%87%E7%9A%84%E7%AE%97%E6%B3%95%E9%A2%98.md

- https://github.com/CyC2018/CS-Notes

- https://www.nowcoder.com/discuss/472041?type=post&order=time&pos=&page=2&channel=666&source_id=search_post&subType=2

- 将链表按奇偶序号分成两个链表，按序号而不是值

- 给一个序列判断是不是二叉搜索树的后序遍历

- 字典树这种数据结构 平常会用吗？ 

    面试官讲课开始，大意是说，频繁搜索的情况，用[链表](https://www.nowcoder.com/jump/super-jump/word?word=链表)的话就是很快的，其实mysql的b+树，最后不就是个[链表](https://www.nowcoder.com/jump/super-jump/word?word=链表)嘛。还讲了不少，总之很精彩。 

- 给定一个升序数组 1，元素有重复，对每个元素算一下平方后得到新的数组 2，问数组 2 中不相同的元素共有多少个？给出[算法]()和空间复杂度，要求尽量优化。

   追问：

   1: 是否一定要平方？

   2: 对于 [-13, -13, -13, 17, 17, 17] 这个输入数组，你的解法有什么问题？

-  如何判断一个单[链表](https://www.nowcoder.com/jump/super-jump/word?word=链表)有没有环，有环什么现象，无环什么现象 

   如何判断两个单[链表](https://www.nowcoder.com/jump/super-jump/word?word=链表)有没有交点，有交点什么现象，无交点什么现象 

   要是两个单[链表](https://www.nowcoder.com/jump/super-jump/word?word=链表)可能有环怎么判断有没有交点 

- 手撕代码：将所有负数移到左边，所有正数移到右边，并保持相对位置不变（[剑指offer](https://www.nowcoder.com/jump/super-jump/word?word=剑指offer)原题）

- [算法]()1，4，5拼数字，最少数字（一开始以为是贪心[算法]()，很快写出来了，面试官说不对，给了一个提示，n=5*i+4*j+k,result=min(i+j+k），没办法，只能暴力求解，写一半，面试官不让写了）

- 数字1~n，k=4，把n个数按字典[排序]()，取第k个 

    我的思路，硬排，遍历+if-else，贼麻烦但是复杂度最低的方法。且写不出来，且还以为可以用字符串递归生成。 

    面试官：字典树了解不。这是完全十叉树。 

    接着问，完全十叉树，改怎么降低复杂度？ 

    面试官（对我没答出来）：就用你之前的思路，每次到了n的时候就往回走了 （<-其实我现在也是懵的不是很懂 

    接着问（我靠还问吗捂脸），如果现在不是按顺序的n个数，是随便输入的任意个数，怎么按字典序找第k个 

    我：还是字典树 

    面试官：怎么解决重复，复杂度是多少 

    我：重复，就 字典树我记得如果是存单词的话可以在结构中标记哪里到了词的末尾，就在这里加。复杂度想不出来（<-只在书上看过字典树 

    面试官：你想一下[二叉树]()的复杂度是多少 

    我：描述了一下[二叉树]()怎么插入的，logN 

    面试官：这个复杂度也是logN。其实他跟b+树差不多的。 

    面试官：以及，topN一般怎么解决 

    我：堆，PriorityQueue重写Compare 

    面试官：后面这种随便输入的，也可以直接重写Compare。不过就不是按数字大小，是按字符串顺序。 

    我：（我靠牛逼！） 

    面试官：嗯好吧，咱们接着问吧 

其他

- ​	如何设计一个榨汁机类（说了很多面向对象的思想，面试官都不满意，下来才知道面试官是想考察设计模式）
- elasticsearch是怎么使用的，有接触过大数据的应用吗
- .当前要存入elasticsearch的数量过大，会在存储时造成等待，存储速度很慢，如何解决这个问题。我：增加存储节点。面试官解答：使用消息队列，缓解存储等待和数据阻塞。

- ​	C++面向对象的特性是什么，分别介绍下

## 二面：45分钟-会谈到项目

- 项目
  - 可以拿得出手的地方
    - 问了kafka如何解决消息发送丢失和消息重复消费的方案，kafka的架构，Topic分区机制，消费者组的机制等等，另外还有zoo[keep](https://www.nowcoder.com/jump/super-jump/word?word=keep)er选举机制，节点间通讯用的协议；（和项目经历，简历有关，可以简单提一下）
  - ​     讲一讲登陆和注册是怎样实现的？             你的登陆状态是怎样保存的？（没有保存，尴尬。。。）             如果要保存，需要怎么做？             压力测试是怎么做的？    
- 程序编译的完整过程
  -  静态链接和动态链接的区别，哪种链接更快？   哪种链接生成的可执行文件更大？ 
- main函数之前和之后都会做什么工作？ 
-  内存空间分为哪几个部分？全局变量存在哪个部分？ 
-  栈区和堆区的区别？分配的地址分别从高地址到低地址？ 
-  字节序了解吗？讲一下大端对齐和小端对齐 
-  大端和小端由什么决定？（CPU） 
-  讲一讲虚拟内存？ 
-  虚拟内存的优点除了能在逻辑上扩大内容容量，还有什么好处？ 
-  讲一讲内存置换[算法]() 
-  讲一讲段页式存储管理，一个页通常有多大（4KB）    
-   讲一讲内存对齐   
- 多线程同步有哪些方式   除了互斥锁，你还知道什么锁   自旋锁和互斥锁的区别  
-  说一说HTTPS的SSL层的建立过程？  
-  为什么要同时使用非对称加密和对称加密？   非对称加密[算法]()有哪些？  
-  说一说几种HTTP协议版本之间的区别？ 
-   讲一讲DNS的查询流程   你知道DNS劫持吗  
-  讲一讲IP地址到MAC地址转换的流程            
-   [算法]()：无序数组中找出和为0的三元组（[leetcode]() 15）
- 计网和操作系统
  - 计算机网络的5级分层
    - 主要用了什么协议
    - tcp ip udp协议有什么区别
    - http和https的区别
  - 对于进程管理这一块，你有什么可以说的？如果一个进程占用了过多时间，怎么办？
  - 对于内存管理这一块，你有什么可以说的？虚拟内存怎么优化？
  - Socket 编程用了哪些系统调用？
  - TCP 的包怎么保证有序性？
  - 用过哪些 MySQL 引擎？
  - InnoDB 和 MyISAM 的区别。
  - MySQL 索引的实现。
  - 在 MySQL 中，怎么知道一条语句是否使用了索引？
  - 如果一条语句的查询关键字包含了索引中的关键字，但是 MySQL 引擎还是没有使用索引，有可能是什么原因？
- java基础
  - 重载和重写
  - 方法签名
  - 类的加载机制
    - 加载、验证、准备、解析、初始化每部分都做了什么
  - java里面map的类型（hashmap，concurrenthashmap，linkedHashMap，treemap）有什么区别，
- 并发
  - cas是什么呢
  - 什么是乐观锁，什么是悲观锁
  - 还有什么锁吗
    - 乐观锁，悲观锁，读写锁，互斥锁，共享锁，CLH锁，MSC锁，自旋锁，偏向锁，公平锁，非公平锁，可重入锁
  - 线程的同步方式
    - 共享变量
    - wait/notify
    - condition的await/signal
    - 父子线程可以通过inhritableThreadLocal
    - 消息队列
  - 什么是死锁，怎么避免（条件和破坏条件）
  - 线程和进程有什么区别
  - java里面怎么分配内存（从栈到堆中的内存分配）
    - 堆满是什么概念（讲垃圾回收，从minorGC->fullGC到新生代和老年代的占比）
- 其他
  - 虚拟内存和物理内存有什么区别，空间置换
- 算法
  - 找到一棵完全[二叉树](https://www.nowcoder.com/jump/super-jump/word?word=二叉树)的最后一层的[最右](https://www.nowcoder.com/jump/super-jump/word?word=最右)节点
  - 接雨水
  - 编程题：给定 m 个不重复字符（如：[a, b, c]），以及一个长度为 n 的字符串 (如：tbbacbctsafsg)，问能否在这个字符串中找到一个长度为 m 的连续子串。要求子串由给定的 m 个字符组成，顺序不要求（如：bac）。
    - 我先说了暴力解法，然后想到了一个 O(N) 的解法，但是需要额外的空间。面试官问能不能把空间复杂度降为 O(1)，我没想出来，面试官提示说可以用 bitset 代替集合结构。 

## 三面：30分钟

- 自我介绍+简单项目介绍

- mysql的高可用方案

- EKL是用来干嘛的，数据量大了怎么优化

- http协议各个版本的区别，演进的逻辑

- tcp的一些拥塞控制算法了解多少

- 怎么确定数据包丢失了（冗余ACK），ACK会不会丢失呢

- java的内存调优

- 内存gc

- HTTPS 密钥交换的过程。（我只知道 RSA 密钥[算法](https://www.nowcoder.com/jump/super-jump/word?word=算法)，大概讲了一下过程。

- 用过缓存系统吗？redis

- 你这日志是怎么实现的？       

-  为什么要用异步呢？异步和同步有什么区别啊？        

-  为什么要用epoll呢？       

-  epoll在什么情况下会比select或者poll效率低呢？ 

-  你能设计一种新的IO复用方式吗？   

  ```
   class A{  int test(int); };  class B : public A{  int test(int a, int b = 0); }  int main() {  A* p = new A;  p->test(1); // 这里会调用哪个函数？ }
  ```

   

   指针和引用有什么区别 

   TCP和UDP的区别？说详细点 

   TCP头部包含哪些字段？ 

   拥塞控制和流量控制的区别 

   拥塞控制的目的是什么？ 

   要是视频通话改为TCP传输，会发生什么？ 

   要是缓冲区就100个字节，发送方发送了200个字节，另外100个字节怎么半？丢弃吗？ 

   HTTPS连接的流程？ 

   一定要[客户端]()用公钥加密，服务端用私钥解密吗？反过来会怎么样？ 

    要是HTTPS请求被拦截，伪造一个公钥证书证书和[客户端]()进行通信，存在这种可能性吗？   数字签名知道吗？它的内容是什么？   场景题1: 在弱网环境下，如何确保一个请求发送成功？  

   场景题2: app如何精准校时 

   场景题3: 一个app在启动的时候有很多模块要加载，一个模型就要使用一个线程，怎样限制线程的最大使用数量？ 

  ​         场景题4: 怎样提高数据的增删改查的性能？多多益善        

  ​         设计模式会吗？介绍几种常用的设计模式？那几种工厂模式有什么区别啊？
  ​         

  ​         [算法]()：求出数组右边小于当前元素的个数（[leetcode]() 315）

- 算法

  - 编程题：现有两个表示正整数的字符串，写一个函数求的两个整数相加的结果对应的字符串。见 LeetCode 415。（我以为这是道热身题，没想到写完这题就结束了。）